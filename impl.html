
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Chapter 6: Exemplar Implementation Â· Computer Networks: A Systems Approach</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-block-align/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-flexible-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-smart-nav-collapse/smart-nav-collapse.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="cloud.html" />
    
    
    <link rel="prev" href="disaggregate.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    About
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="preface.html">
            
                <a href="preface.html">
            
                    
                    Preface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="intro.html">
            
                <a href="intro.html">
            
                    
                    Chapter 1: Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="primer.html">
            
                <a href="primer.html">
            
                    
                    Chapter 2: Wireless Transmission
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="arch.html">
            
                <a href="arch.html">
            
                    
                    Chapter 3: Basic Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="ran.html">
            
                <a href="ran.html">
            
                    
                    Chapter 4: RAN Internals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="disaggregate.html">
            
                <a href="disaggregate.html">
            
                    
                    Chapter 5: Advanced Capabilities
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8" data-path="impl.html">
            
                <a href="impl.html">
            
                    
                    Chapter 6: Exemplar Implementation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="cloud.html">
            
                <a href="cloud.html">
            
                    
                    Chapter 7: Cloudification of Access
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Chapter 6: Exemplar Implementation</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="chapter-6-exemplar-implementation">Chapter 6: Exemplar Implementation</h1>
<p>The steps we&#x2019;ve taken in the previous chapters to virtualize,
disaggregate, optimize, distribute, and slice the cellular network not
only help us understand the inner-workings of 5G, but they are also
necessary to reduce the entirety of the 5G cellular network to
practice. The goal is an implementation, which by definition, forces
us to make specific engineering choices. This chapter describes one
set of engineering choices that results in a running system. It should
be interpreted as an exemplar, for the sake of completeness, but not
the only possibility.</p>
<p>The system we describe is called CORD, which you will recall from the
Introduction is an acronym (<strong>C</strong>entral <strong>O</strong>ffice <strong>R</strong>e-architected
as a <strong>D</strong>atacenter). More concretely, CORD is a blueprint for
building a 5G deployment from commodity hardware and a collection of
open source software components. We call this hardware/software
combination a CORD POD, where the idea is to deploy a POD at each edge
site that is part of a cellular network. The following describes CORD
in terms of a set of engineering decisions. It is not a substitute for
detailed documentation for installing, developing, and operating CORD,
which can be found elsewhere: <a href="https://guide.opencord.org" target="_blank">https://guide.opencord.org</a>.</p>
<blockquote>
<p>As discussed in the Introduction, even though CORD includes &#x201C;Central 
Office&#x201D; in its name, a CORD POD is a general design, and not strictly 
limited to being deployed in a conventional Central Office.</p>
</blockquote>
<p>Before getting into the specifics, it is important to understand that
CORD is a work-in-progress, with a sizable open source community
contributing to its code base. Many of the components are quite
mature, and currently running in operator trials and production
networks. Others (largely corresponding to the advanced capabilities
described in the previous chapter) are prototypes that run in
&#x201C;demonstration mode,&#x201D; but are not yet complete enough to be included
in official releases. Also, as outlined in the earlier discussion on
deployment options, CORD starts with a production-quality EPC that is
being incrementally evolved into its 5G counterpart. (This chapter
uses the EPC-specific components for illustrative purposes.)</p>
<h2 id="framework">Framework</h2>
<p><a href="#cord">Figure 6.1</a> gives a schematic overview of a CORD POD. It
connects downstream to a set of DUs (and associated RUs), and upstream
to the rest of the Internet. Internally, it includes a set of commodity
servers (the figure shows four racks of three servers each, but the
design accommodates anywhere from a partial rack to 16 racks) and a
set of white-box switches arranged in a leaf-spine topology (the
figure shows two leaves and two spine switches, but the design allows
anywhere from a single switch to two leaf switches per rack and as
many spine switches as necessary to provide sufficient east-to-west
bandwidth).</p>
<figure>
    <a id="cord"></a>
    <img src="figures/Slide25.png" width="650px">
    <figcaption>Figure 6.1: CORD implementation of RAN and Mobile
    Core.</figcaption>
</figure>

<p>With respect to software, <a href="#cord">Figure 6.1</a> shows a combination of
RAN (red) and Mobile Core (blue) components, plus the modules that
define the CORD platform (orange). We describe the platform components
later in this chapter, but you can think of them as collectively
implementing a multi-tenant cloud on top of which many different
scalable services can run. The RAN and Mobile Core are two such
tenants. The CORD platform can also host other edge services (which is
one reason CORD is built using cloud technology in the first place),
but exactly what other edge services might run on a given CORD POD is
beyond the scope of this book.</p>
<p>The RAN and Core related components are ones we&#x2019;ve described in
earlier chapters. They include the Control and User planes of the CU
and Mobile Core, respectively, where to simplify the diagram, we show
the SGW and PGW merged into a single S/PGW. One aspect of Figure E
that requires further elaboration is how each of the RAN and Mobile
Core components are actually realized. There are three different
manifestations of the functional components implied by the Figure: (1)
the data plane layer of the CU-U and S/PGW-U are realized as P4
programs loaded into the programmable switches; (2) the control plane
layer of the CU-U and S/PGW-U (as well as the Trellis platform module)
are realized as control applications loaded onto the ONOS Network OS;
and the remaining components are realized as Kubernetes-managed
microservices. (Kubernetes is implicit, and not shown in the figure.)</p>
<p>To expand on this idea, <a href="#ci-cd">Figure 6.2</a> gives an alternative view
of a CORD POD, abstracting away the details of <em>what</em> services it
hosts, and focusing instead on <em>how</em> those services are instantiated
on the POD. In this figure, all the functionality instantiated onto
the POD runs as a combination of Kubernetes-based microservices and
ONOS-based control applications.</p>
<figure>
    <a id="ci-cd"></a>
    <img src="figures/Slide26.png" width="350px">
    <figcaption>Figure 6.2: Alternative view of CORD, with a CI/CD
    toolchain managing the platform and set of services implemented by
    a combination of ONOS-based control apps and Kubernetes-based
    microservices.</figcaption>
</figure>

<p>When abstracted in this way, we can view a POD as including three
major subsystems:</p>
<ul>
<li><p><strong>Platform:</strong> The base layer common to all configurations includes
Kubernetes as the container management system and ONOS as the SDN
controller, with Stratum loaded on to each switch. Both ONOS and the
control applications it hosts run as a Kubernetes-managed
microservices.</p>
</li>
<li><p><strong>Profile:</strong> The deployment-specific collection of microservices
and SDN control apps that have been selected to run on a particular
POD. This is a variable and evolvable set, and it includes the control
plane and edge services described elsewhere.</p>
</li>
<li><p><strong>CI/CD Toolchain:</strong> Used to assemble, deploy, operate, and upgrade
a particular Platform/Profile combination. It implements a set of
processes that transforms a collection of disaggregated and
virtualized components into an operational system capable of
responding to operator directives and carrying live traffic.</p>
</li>
</ul>
<p>Although beyond the scope of this book, the CI/CD toolchain uses
standard DevOps tools to bootstrap software onto the cluster of
servers and switches, and rollout/rollback individual microservices
and control applications. It also auto-generates the Northbound
Interface (NBI) that operators use to manage the POD, based on a
declarative specification of the Profile the POD is configured to
support. This NBI is sufficiently complete to operate a CORD POD in a
production environment.</p>
<h2 id="platform-components">Platform Components</h2>
<p>We now return to the three platform-related components shown in
<a href="#cord">Figures 6.1</a> and <a href="#ci-cd">6.2</a>. Each is a substantial open
source component in its own right, but for our purposes, it is enough
to understand the role each plays in supporting a 5G-based profile of
CORD.</p>
<ul>
<li><p><strong>Stratum:</strong> A thin operating system that runs locally on each
white-box switch. It&#x2019;s purpose is to provide a hardware-independent
interface for managing and programming the switches in CORD. This
includes using <em>P4</em> to define the forwarding behavior of the
switch&#x2019;s forwarding pipeline (think of this program as a contract
between the control and data planes), and <em>P4Runtime</em> to control
that forwarding contract at runtime.</p>
</li>
<li><p><strong>ONOS:</strong> A Network Operating System used to configure and control a
network of programmable white-box switches. It runs off-switch as a
logically centralized SDN controller, and hosts a collection of SDN
control applications, each of which controls some aspect of the
underlying network. Because it is logically centralized, ONOS is
designed to be highly available and to have scalable performance.</p>
</li>
<li><p><strong>Trellis:</strong> An ONOS-hosted SDN control application that implements
a leaf-spine fabric on a network of white-box switches. It
implements the control plane for several features, including VLANs
and L2 bridging, IPv4 and IPv6 unicast and multicast routing, DHCP
L3 relay, dual-homing of servers and upstream routers, QinQ
forwarding/termination, MPLS pseudowires, and so on. In addition,
Trellis can make the entire fabric appear as a single (virtual)
router to upstream routers, which communicate with Trellis using
standard BGP.</p>
</li>
</ul>
<p>Stratum (running on each switch) and ONOS (running off-switch and
managing a network of switches) communicate using the following
interfaces:</p>
<ul>
<li><p><strong>P4:</strong> Defines the forwarding behavior for programmable switching
chips as well as model fixed-function ASIC pipelines. A P4 program
defines a contract that is implemented by the data plane and
programmable by the control plane.</p>
</li>
<li><p><strong>P4Runtime:</strong> An SDN-ready interface for controlling forwarding
behavior at runtime. It is the key for populating forwarding tables
and manipulating forwarding state, and it does so in a P4 program
and hardware agnostic way.</p>
</li>
<li><p><strong>OpenConfig Models:</strong> Define a base for device configuration and
management. These models can be programmatically extended for
platform-specific functionality, but the goal is to minimize model
deviations so as to enable a vendor-agnostic management plane.</p>
</li>
<li><p><strong>gNMI</strong> (gRPC Network Management Interface): Improves on the
existing configuration interfaces by using a binary representation
on the wire and enabling bi-directional streaming. Paired with the
OpenConfig models, gNMI is SDN-ready.</p>
</li>
<li><p><strong>gNOI</strong> (gRPC Network Operations Interfaces): A collection of
microservices that enable switch specific operations, like
certificate management, device testing, software upgrade, and
networking troubleshooting. gNOI provides a semantically rich API
that replaces existing CLI-based approaches.</p>
</li>
</ul>
<p>Trellis, as an SDN control application running on top of ONOS,
controls packet forwarding across the switching fabric internal to a
CORD POD (i.e., within a single site). But Trellis can also be
extended across multiple sites deeper into the network using multiple
stages of spines, as shown in <a href="#trellis">Figure 6.3</a>. This means
Trellis has the potential to play a role in implementing the backhaul
and midhaul network for the RAN, or alternatively, extending the RAN
into customer premises (denoted &#x201C;On Site&#x201D; in the figure).</p>
<figure>
    <a id="trellis"></a>
    <img src="figures/Slide31.png" width="650px">
    <figcaption>Figure 6.3: Trellis control application managing a
    (possibly distributed) leaf-spine fabric.</figcaption>
</figure>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="disaggregate.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 5: Advanced Capabilities">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="cloud.html" class="navigation navigation-next " aria-label="Next page: Chapter 7: Cloudification of Access">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Chapter 6: Exemplar Implementation","level":"1.8","depth":1,"next":{"title":"Chapter 7: Cloudification of Access","level":"1.9","depth":1,"path":"cloud.md","ref":"cloud.md","articles":[]},"previous":{"title":"Chapter 5: Advanced Capabilities","level":"1.7","depth":1,"path":"disaggregate.md","ref":"disaggregate.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchorjs","katex","block-align","flexible-alerts","sequence-diagrams","creativecommons","intopic-toc","custom-favicon","smart-nav-collapse"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css"},"pluginsConfig":{"intopic-toc":{"label":"Content","selector":".markdown-section h2","visible":true},"block-align":{},"search":{},"sequence-diagrams":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":"bridge.ico","custom-favicon":{},"creativecommons":{},"flexible-alerts":{"danger":{"className":"danger","icon":"fa fa-ban","label":"Attention"},"note":{"className":"info","icon":"fa fa-info-circle","label":"Note"},"style":"callout","tip":{"className":"tip","icon":"fa fa-lightbulb-o","label":"Tip"},"warning":{"className":"warning","icon":"fa fa-exclamation-triangle","label":"Warning"}},"smart-nav-collapse":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"branch":"master"},"title":"Computer Networks: A Systems Approach","gitbook":"*"},"file":{"path":"impl.md","mtime":"2019-09-18T17:29:13.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-09-18T17:30:03.555Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-flexible-alerts/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-intopic-toc/gumshoe.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-smart-nav-collapse/smart-nav-collapse.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

